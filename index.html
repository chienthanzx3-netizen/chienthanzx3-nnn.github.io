<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Gieo Qu·∫ª Kinh D·ªãch</title>

<style>
body{
    margin:0;
    font-family: "Times New Roman", serif;
    background: radial-gradient(circle at top,#3b2a1a,#000);
    color:#FFD700;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    text-align:center;
}

.container{
    background: rgba(0,0,0,0.75);
    padding:30px;
    border-radius:15px;
    max-width:700px;
    box-shadow:0 0 40px rgba(255,215,0,0.3);
}

h1{
    font-size:34px;
    margin-bottom:15px;
    text-shadow:0 0 10px #FFD700;
}

input{
    padding:10px;
    width:90%;
    margin-bottom:15px;
    font-size:16px;
    border-radius:8px;
    border:none;
}

button{
    padding:12px 20px;
    font-size:18px;
    background:#b8860b;
    color:white;
    border:none;
    border-radius:8px;
    cursor:pointer;
    margin:5px;
    font-weight:bold;
}

button:hover{
    background:#daa520;
}

.coin{
    width:75px;
    height:75px;
    border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #ffd700, #b8860b);
    border:4px solid #8b7500;
    display:inline-flex;
    justify-content:center;
    align-items:center;
    margin:5px;
    font-size:28px;
    font-weight:bold;
    color:#5b3a00;
    position:relative;
    box-shadow:0 0 15px rgba(255,215,0,0.6);
    animation: flip 0.4s ease;
}

.coin::after{
    content:"";
    position:absolute;
    width:22px;
    height:22px;
    background:#000;
    z-index:0;
}

.coin span{
    z-index:1;
}

@keyframes flip{
    0%{ transform: rotateY(0deg); }
    100%{ transform: rotateY(360deg); }
}

.line{
    font-size:22px;
    margin:2px;
}

.result{
    margin-top:20px;
    font-size:18px;
    line-height:1.6;
}
</style>
</head>

<body>

<div class="container">

<h1>‚òØ Gieo Qu·∫ª Kinh D·ªãch ‚òØ</h1>

<input id="question" placeholder="Nh·∫≠p ƒëi·ªÅu b·∫°n mu·ªën h·ªèi..." />

<div id="coins"></div>

<button onclick="tung()">Tung ƒê·ªìng Xu</button>
<button onclick="reset()">Gieo L·∫°i</button>

<div id="hexagram"></div>
<div class="result" id="result"></div>

</div>

<script>

let lines = [];

const hexagramList = [
"Thu·∫ßn C√†n","Thu·∫ßn Kh√¥n","Th·ªßy L√¥i Tru√¢n","S∆°n Th·ªßy M√¥ng","Th·ªßy Thi√™n Nhu","Thi√™n Th·ªßy T·ª•ng",
"ƒê·ªãa Th·ªßy S∆∞","Th·ªßy ƒê·ªãa T·ª∑","Phong Thi√™n Ti·ªÉu S√∫c","Thi√™n Tr·∫°ch L√Ω","ƒê·ªãa Thi√™n Th√°i","Thi√™n ƒê·ªãa Bƒ©",
"Thi√™n H·ªèa ƒê·ªìng Nh√¢n","H·ªèa Thi√™n ƒê·∫°i H·ªØu","ƒê·ªãa S∆°n Khi√™m","L√¥i ƒê·ªãa D·ª±",
"Tr·∫°ch L√¥i T√πy","S∆°n Phong C·ªï","ƒê·ªãa Tr·∫°ch L√¢m","Phong ƒê·ªãa Qu√°n",
"H·ªèa L√¥i Ph·ªá H·∫°p","S∆°n H·ªèa B√≠","S∆°n ƒê·ªãa B√°c","ƒê·ªãa L√¥i Ph·ª•c",
"Thi√™n L√¥i V√¥ V·ªçng","S∆°n Thi√™n ƒê·∫°i S√∫c","S∆°n L√¥i Di","Tr·∫°ch Phong ƒê·∫°i Qu√°",
"Thu·∫ßn Kh·∫£m","Thu·∫ßn Ly","Tr·∫°ch S∆°n H√†m","L√¥i Phong H·∫±ng",
"Thi√™n S∆°n ƒê·ªôn","L√¥i Thi√™n ƒê·∫°i Tr√°ng","H·ªèa ƒê·ªãa T·∫•n","ƒê·ªãa H·ªèa Minh Di",
"Phong H·ªèa Gia Nh√¢n","H·ªèa Tr·∫°ch Khu√™","Th·ªßy S∆°n Ki·ªÉn","L√¥i Th·ªßy Gi·∫£i",
"S∆°n Tr·∫°ch T·ªïn","Phong L√¥i √çch","Tr·∫°ch Thi√™n Qu·∫£i","Thi√™n Phong C·∫•u",
"Tr·∫°ch ƒê·ªãa T·ª•y","ƒê·ªãa Phong ThƒÉng","Tr·∫°ch Th·ªßy Kh·ªën","Th·ªßy Phong T·ªânh",
"Tr·∫°ch H·ªèa C√°ch","H·ªèa Phong ƒê·ªânh","Thu·∫ßn Ch·∫•n","S∆°n L√¥i Di",
"Phong S∆°n Ti·ªám","L√¥i Tr·∫°ch Quy Mu·ªôi","L√¥i H·ªèa Phong","H·ªèa S∆°n L·ªØ",
"Thu·∫ßn T·ªën","Thu·∫ßn ƒêo√†i","Phong Th·ªßy Ho√°n","Th·ªßy Tr·∫°ch Ti·∫øt",
"Phong Tr·∫°ch Trung Phu","L√¥i S∆°n Ti·ªÉu Qu√°","Th·ªßy H·ªèa K√Ω T·∫ø","H·ªèa Th·ªßy V·ªã T·∫ø"
];

function tung(){
    if(lines.length >= 6){
        alert("ƒê√£ ƒë·ªß 6 l·∫ßn gieo!");
        return;
    }

    let total = 0;
    let html = "";

    for(let i=0;i<3;i++){
        let isYang = Math.random() < 0.5;
        total += isYang ? 3 : 2;

        let char = isYang ? "‰πæ" : "Âù§";
        html += "<div class='coin'><span>"+char+"</span></div>";
    }

    lines.push(total);

    document.getElementById("coins").innerHTML +=
        "<div>"+html+" ‚Üí "+total+"</div>";

    if(lines.length === 6){
        generateHexagram();
    }
}

function generateHexagram(){

    let binaryMain = "";
    let binaryChanged = "";
    let display = "";

    for(let i=5;i>=0;i--){
        let line = lines[i];

        if(line === 6){
            display += "<div class='line'>‚Äî ‚Äî (L√£o √Çm)</div>";
            binaryMain += "0";
            binaryChanged += "1";
        }
        else if(line === 7){
            display += "<div class='line'>‚Äî‚Äî‚Äî</div>";
            binaryMain += "1";
            binaryChanged += "1";
        }
        else if(line === 8){
            display += "<div class='line'>‚Äî ‚Äî</div>";
            binaryMain += "0";
            binaryChanged += "0";
        }
        else if(line === 9){
            display += "<div class='line'>‚Äî‚Äî‚Äî (L√£o D∆∞∆°ng)</div>";
            binaryMain += "1";
            binaryChanged += "0";
        }
    }

    document.getElementById("hexagram").innerHTML = display;

    let indexMain = parseInt(binaryMain,2) % 64;
    let indexChanged = parseInt(binaryChanged,2) % 64;

    let mainName = hexagramList[indexMain];
    let changedName = hexagramList[indexChanged];

    let question = document.getElementById("question").value;

    document.getElementById("result").innerHTML =
    "<br>üìú C√¢u h·ªèi: "+(question || "Kh√¥ng nh·∫≠p")+
    "<br><br>üîÆ Qu·∫ª Ch√≠nh: <b>"+mainName+
    "</b><br>üîÅ Qu·∫ª Bi·∫øn: <b>"+changedName+
    "</b><br><br>‚ú® Lu·∫≠n gi·∫£i t·ªïng qu√°t:<br>"+
    "C√≥ h√†o bi·∫øn t·ª©c l√† th·ªùi v·∫≠n ƒëang chuy·ªÉn ƒë·ªông.<br>"+
    "Gi·ªØ ch√≠nh ƒë·∫°o, kh√¥ng n√≥ng v·ªôi s·∫Ω c√°t.";
}

function reset(){
    lines=[];
    document.getElementById("coins").innerHTML="";
    document.getElementById("hexagram").innerHTML="";
    document.getElementById("result").innerHTML="";
}

</script>

</body>
</html>
